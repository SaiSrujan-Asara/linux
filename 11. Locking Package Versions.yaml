ğŸ§  What Does "Locking a Package Version" Mean?

Locking (or holding) a package in Ubuntu means:

âŒ Preventing it from being upgraded, even when newer versions are available in the repository.

âœ… The package can still be installed and used, but will not be upgraded during:

sudo apt upgrade

---

ğŸ”§ Tool: apt-mark

APT provides a command-line utility called apt-mark to manage package states.

âœ… Lock a Package (Hold)

sudo apt-mark hold <package-name>

ğŸ”¸ Example:

sudo apt-mark hold nginx

This prevents nginx from being upgraded unless you remove the hold.

ğŸ” Unlock a Package (Unhold)

sudo apt-mark unhold <package-name>

ğŸ”¸ Example:

sudo apt-mark unhold nginx

ğŸ” Check Which Packages Are Held

apt-mark showhold

ğŸ” Alternative: dpkg --set-selections (Advanced)

Also possible, but less common today:

âœ… Hold a Package

echo "nginx hold" | sudo dpkg --set-selections

ğŸ” Unhold a Package

echo "nginx install" | sudo dpkg --set-selections

------
ğŸ”¬ Difference: Pinning vs Holding

| Feature                     | `apt-mark hold`      | Pinning (`/etc/apt/preferences.d`)   |
| --------------------------- | -------------------- | ------------------------------------ |
| Purpose                     | Prevent **upgrades** | Control **source/version** selection |
| Simpler to use?             | âœ… Yes                | âŒ No (needs config file)             |
| Can block **only upgrades** | âœ… Yes                | âœ…/âŒ (depends on pin rules)           |
| GUI-friendly?               | âœ… Yes                | âŒ No                                 |
| Good for one-time freezes   | âœ… Yes                | âŒ (used for finer control)           |

| Feature          | Hold/Freeze             | Pinning                                    |
| ---------------- | ----------------------- | ------------------------------------------ |
| Prevent upgrades | Yes                     | Can control version and source preferences |
| Granularity      | Package-level only      | Package and repository level               |
| Usage complexity | Simple                  | Advanced (requires config files)           |
| Configuration    | Via commands            | Via `/etc/apt/preferences`                 |
| Use case         | Freeze package versions | Control package source priorities          |


---
âœ… Summary Table

| Task                   | Command                      |                              |
| ---------------------- | ---------------------------- | ---------------------------- |
| Hold a package         | `sudo apt-mark hold <pkg>`   |                              |
| Unhold a package       | `sudo apt-mark unhold <pkg>` |                              |
| View all held packages | `apt-mark showhold`          |                              |
| Set hold via `dpkg`    | \`echo "<pkg> hold"          | sudo dpkg --set-selections\` |
